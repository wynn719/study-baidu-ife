define(["backbone","jquery","underscore","routers/default","collections/tasks","common"],function(e,t,i,n,o,a){var s=e.View.extend({initialize:function(){this.tasksCollection=o,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},tagName:"li",className:"task",template:i.template(t("#category_li").html()),render:function(){return this.$el.html(this.template(this.model.toJSON())),this},events:a.is_phone()?{tap:"openCate","tap .delete-icon":"clear"}:{click:"openCate","click .delete-icon":"clear"},openCate:function(e){return e.preventDefault(),-1!==e.target.className.indexOf("delete-icon")||-1!==e.target.className.indexOf("sprite")?!1:void window.appRouter.navigate("category_"+this.model.id,{trigger:!0})},clear:function(e){e.preventDefault();var t=!0;if(this.model.get("tasks_count")&&(t=confirm("该目录下有任务，是否删除?")),t){var i=this.model.get("id");this.tasksCollection.each(function(e){e.get("cate")===i&&e.destroy()}),this.model.destroy()}}});return s});