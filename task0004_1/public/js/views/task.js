define(["backbone","jquery","underscore","common","zeptoTouch"],function(e,t,i,s){var l=e.View.extend({initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"visible",this.hideSelf)},tagName:"li",className:"task",template:i.template(t("#task_li").html()),events:s.is_phone()?{tap:"openTask","tap .delete-icon":"clear","tap .checkbox":"toggleTaskState"}:{click:"openTask","click .delete-icon":"clear","click .checkbox":"toggleTaskState"},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.toggleClass("finished",this.model.get("is_finished")),this},clear:function(e){e.preventDefault(),this.model.destroy()},toggleTaskState:function(e){return e.preventDefault(),-1===e.target.className.indexOf("checkbox")?!1:(this.model.toggle(),void this.$el.toggleClass("finished",this.model.get("is_finished")))},openTask:function(e){return e.preventDefault(),-1!==e.target.className.indexOf("delete-icon")||-1!==e.target.className.indexOf("checkbox")||-1!==e.target.className.indexOf("sprite")||-1!==e.target.className.indexOf("checkbox-input")?!1:void window.appRouter.navigate("task_"+this.model.get("id"),!0)},hideSelf:function(e){this.model.get("cate")!==e?this.$el.hide():this.$el.show()}});return l});